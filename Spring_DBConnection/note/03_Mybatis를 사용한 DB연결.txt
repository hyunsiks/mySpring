03_Mybatis를 사용한 DB연결.txt

# Mybatis

	- SQL문만 적으면 DB와 연결하는 코드(영속계층)를 쉽게 작성하도록 도와주는 프레임워크
	- 거의 모든 JDBC코드를 알아서 생성해서 사용해준다.
	- 사용자는 쿼리문의 종류와 원하는 SQL만 작성하면 된다.
	- XML또는 어노테이션 방식으로 설정할 수 있다
	- Mapper 인터페이스를 생성한 뒤 해당 인터페이스와 같은 경로에 있는 XML을 통해
	
	
# Mybatis XML파일 형식

	- ID 와 Mapper 인터페이스 함수 이름과 같아야한다

<?xml version="1.0" encoding="UTF-8"?>

 <!-- mapper를 새롭게 만들어서 db연결했다 -->

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">  
	<mapper namespace="com.kgitbank.mapper.StockMapper">
	  
	  <!-- 여러 줄 꺼낼 때 -->
	  <select id="getStockList" resultType="com.kgitbank.model.Stock">
	        SELECT * FROM stock
	  </select>
	  
	  <!-- 한 행만 꺼낼 때 -->
	<!--   <select id="getStock" resultType="com.kgitbank.model.Stock"> -->
	<!--   	SELECT * FROM stock WHERE stock_id=#{id} -->
	<!--   </select> -->
	  
	  <insert id="insertStock">
	  	INSERT INTO stock(stock_id, stock_name, stock_price, stock_holdings) 
	  	VALUES
	  	(stock_seq.nextval,
	  	#{stock_name}, #{stock_price},
	  	#{stock_holdings})
	  </insert>
	  
	  <delete id="deleteStock">
	  	DELETE FROM stock where stock_name = '${stock_name}'
	  </delete>
	  
	  <update id="changeStock">
		UPDATE STOCK SET stock_name = 'LG' where stock_name = '${stock_name}'
	  </update>
	  
	</mapper>